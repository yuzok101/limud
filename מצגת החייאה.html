<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>××¦×’×ª ×”×—×™×™××”</title>
<link rel="icon" href="logo.png">

<style>
:root{
    --deep-blue:#0d1b2a;
    --light-blue:#1b263b;
    --accent-blue:#415a77;
    --text:#e0e1dd;
}
*{box-sizing:border-box}
body{
    margin:0;
    background:var(--deep-blue);
    color:var(--text);
    font-family:Arial;
}

/* ×¡×¨×’×œ ×¢×œ×™×•×Ÿ */
#topBar{
    position:fixed;
    top:10px; left:10px; right:10px;
    display:flex;
    justify-content:space-between;
    z-index:1000;
}
#profileBtn{
    width:45px;height:45px;
    border-radius:50%;
    border:none;
    background:red;
    color:white;
    font-size:22px;
}
#topLogo{width:45px;cursor:pointer}

h1{
    margin-top:80px;
    text-align:center;
    color:var(--accent-blue);
}

/* Viewer */
#viewer{
    position:relative;
    width:96vw;
    height:72vh;
    margin:15px auto;
    background:#000;
    border-radius:14px;
    overflow:hidden;
    box-shadow:0 12px 30px rgba(0,0,0,.6);
    touch-action:none;
}

/* ×ª××•× ×” ×¢× ××¢×‘×¨ */
#slide{
    width:100%;
    height:100%;
    object-fit:contain;
    opacity:0;
    transform:scale(.97);
    transition:opacity .6s ease, transform .6s ease;
}
#slide.show{
    opacity:1;
    transform:scale(1);
}

/* ×›×¤×ª×•×¨ Play ××¢×•×¦×‘ ×¢× ×× ×™××¦×™×™×ª Pulsate + Fade-out */
@keyframes pulsate {
    0% { transform: translate(-50%,-50%) scale(1); opacity:0.7; }
    50% { transform: translate(-50%,-50%) scale(1.1); opacity:1; }
    100% { transform: translate(-50%,-50%) scale(1); opacity:0.7; }
}
#playBtn{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:50px;
    color:rgba(255,255,255,0.9);
    background:rgba(255,255,255,0.3);
    border:none;
    border-radius:50%;
    width:100px;
    height:100px;
    cursor:pointer;
    z-index:50;
    display:flex;
    justify-content:center;
    align-items:center;
    animation: pulsate 1.5s infinite;
    transition:opacity 0.5s ease;
}
#playBtn.fadeOut{
    opacity:0;
    pointer-events:none;
}
#playBtn:hover{
    background:rgba(255,255,255,0.5);
}

/* × ×™×•×•×˜ */
.nav{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    font-size:40px;
    background:rgba(65,90,119,.85);
    border:none;
    color:white;
    width:60px;
    height:90px;
    cursor:pointer;
    z-index:10;
}
#prev{right:10px}
#next{left:10px}

/* Thumbnails */
#thumbs{
    display:flex;
    gap:6px;
    padding:10px;
    overflow-x:auto;
    background:var(--light-blue);
}
#thumbs img{
    height:60px;
    cursor:pointer;
    opacity:.5;
    border-radius:6px;
    transition:.2s;
}
#thumbs img.active{
    opacity:1;
    outline:2px solid var(--accent-blue);
}

/* Controls */
#controls{
    display:flex;
    justify-content:center;
    gap:8px;
    flex-wrap:wrap;
    margin-bottom:10px;
}
button,input{
    background:var(--accent-blue);
    color:white;
    border:none;
    border-radius:8px;
    padding:7px 12px;
    font-size:14px;
}

@media(max-width:768px){
    #viewer{height:60vh}
    .nav{width:45px;height:70px;font-size:30px}
    #thumbs img{height:50px}
}
</style>
</head>

<body>

<div id="topBar">
    <button id="profileBtn">ğŸ‘¤</button>
    <img src="logo.png" id="topLogo">
</div>

<h1>××¦×’×ª ×”×—×™×™××”</h1>

<div id="viewer">
    <button id="playBtn">â–¶</button>
    <button class="nav" id="prev">â¯</button>
    <button class="nav" id="next">â®</button>
    <img id="slide">
</div>

<div id="controls">
    <button onclick="zoomIn()">ï¼‹ ×–×•×</button>
    <button onclick="zoomOut()">ï¼ ×–×•×</button>
    <button onclick="toggleAuto()">â–¶ ××¦×’×ª ××•×˜×•××˜×™×ª</button>
    <button onclick="toggleFull()">â›¶ ××¡×š ××œ×</button>
</div>

<div id="thumbs"></div>

<script>
const folder="××¦×’×•×ª/××¦×’×ª ×”×—×™×™××”/";
const extensions=["png","jpg","jpeg"];

let slides=[], index=0, zoom=1, auto=null;
let firstLoad=true;

const slide=document.getElementById("slide");
const thumbs=document.getElementById("thumbs");
const viewer=document.getElementById("viewer");
const playBtn=document.getElementById("playBtn");

/* ×˜×¢×™× ×” ×—×›××” â€“ PNG + JPG */
(async()=>{
    for(let i=1;i<500;i++){
        let found=false;
        for(const ext of extensions){
            const img=new Image();
            img.src=`${folder}${i}.${ext}`;
            await new Promise(res=>{
                img.onload=()=>{
                    slides.push(img.src);
                    found=true;
                    res();
                };
                img.onerror=()=>res();
            });
            if(found) break;
        }
        if(!found) break;
    }
    buildThumbs();
})();

/* ×”×¦×’×” */
function showSlide(){
    if(firstLoad){
        slide.src=slides[index];
        slide.style.transform=`scale(${zoom})`;
        slide.classList.add("show");
        firstLoad=false;
    }else{
        slide.classList.remove("show");
        setTimeout(()=>{
            slide.src=slides[index];
            slide.style.transform=`scale(${zoom})`;
            slide.onload=()=>slide.classList.add("show");
        },150);
    }

    [...thumbs.children].forEach((t,i)=>
        t.classList.toggle("active",i===index)
    );
}

/* Thumbnails */
function buildThumbs(){
    slides.forEach((src,i)=>{
        const t=document.createElement("img");
        t.src=src;
        t.onclick=()=>{index=i;resetZoom();showSlide();}
        thumbs.appendChild(t);
    });
}

/* × ×™×•×•×˜ */
next.onclick=()=>{if(index<slides.length-1){index++;resetZoom();showSlide();}}
prev.onclick=()=>{if(index>0){index--;resetZoom();showSlide();}}

/* ×–×•× */
function zoomIn(){zoom=Math.min(4,zoom+.2);showSlide();}
function zoomOut(){zoom=Math.max(1,zoom-.2);showSlide();}
function resetZoom(){zoom=1}

/* ××¦×’×ª ××•×˜×•××˜×™×ª */
function toggleAuto(){
    if(auto){clearInterval(auto);auto=null;return}
    auto=setInterval(()=>{
        index=(index+1)%slides.length;
        resetZoom();showSlide();
    },30000);
}

/* ××¡×š ××œ× */
function toggleFull(){
    if(!document.fullscreenElement) viewer.requestFullscreen();
    else document.exitFullscreen();
}

/* ×”×—×œ×§×” */
let sx=0;
viewer.addEventListener("touchstart",e=>{
    if(e.touches.length===1) sx=e.touches[0].clientX;
});
viewer.addEventListener("touchend",e=>{
    if(e.changedTouches.length===1){
        const dx=e.changedTouches[0].clientX-sx;
        if(dx>50) prev.onclick();
        if(dx<-50) next.onclick();
    }
});

/* Pinch Zoom */
let startDist=0;
viewer.addEventListener("touchstart",e=>{
    if(e.touches.length===2){
        const dx=e.touches[0].clientX-e.touches[1].clientX;
        const dy=e.touches[0].clientY-e.touches[1].clientY;
        startDist=Math.hypot(dx,dy);
    }
});
viewer.addEventListener("touchmove",e=>{
    if(e.touches.length===2){
        const dx=e.touches[0].clientX-e.touches[1].clientX;
        const dy=e.touches[0].clientY-e.touches[1].clientY;
        const dist=Math.hypot(dx,dy);
        zoom=Math.min(4,Math.max(1,zoom*(dist/startDist)));
        startDist=dist;
        slide.style.transform=`scale(${zoom})`;
    }
});

/* ××§×œ×“×ª */
document.addEventListener("keydown",e=>{
    if(e.key==="ArrowLeft") next.onclick();
    if(e.key==="ArrowRight") prev.onclick();
});

/* ×¢×œ×™×•×Ÿ */
profileBtn.onclick=()=>location.href="login1.html";
topLogo.onclick=()=>location.href="media-index.html";

/* ×›×¤×ª×•×¨ Play ×¢× fade-out */
playBtn.onclick=()=>{
    playBtn.classList.add("fadeOut");
    setTimeout(showSlide,500); // ××—×¨×™ ×—×¦×™ ×©× ×™×” ××¦×™×’ ××ª ×”×ª××•× ×” ×”×¨××©×•× ×”
};
</script>

</body>
</html>
