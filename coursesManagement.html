<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ניהול קורסים</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&display=swap');

body {
    margin: 0;
    font-family: 'Assistant', sans-serif;
    background: #0b1f3a;
    color: #fff;
    min-height: 100vh;
}

header {
    background: #0a1630;
    padding: 20px;
    text-align: center;
    font-size: 2rem;
    font-weight: bold;
    color: #00aaff;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}

.container {
    max-width: 1200px;
    margin: 30px auto;
    padding: 0 20px;
}

input, textarea {
    width: 100%;
    max-width: 500px;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
}

button.btn {
    background: #005f99;
    color: #fff;
    padding: 10px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s;
    margin-bottom: 20px;
}

button.btn:hover {
    background: #00aaff;
}

hr { border: 1px solid #0a1630; margin: 20px 0; }

table {
    width: 100%;
    border-collapse: collapse;
    background: #12294f;
    border-radius: 10px;
    overflow: hidden;
}

th, td {
    padding: 12px 15px;
    text-align: center;
}

th {
    background: #0a1630;
    color: #00aaff;
    font-weight: bold;
}

tr:nth-child(even) {
    background: #0f2a51;
}

tr:hover {
    background: #0c1f3d;
}

</style>
</head>
<body>

<header>ניהול קורסים ומבחנים</header>

<div class="container">
  <h3>הוסף קורס חדש</h3>
  <input type="text" id="courseTitle" placeholder="שם הקורס">
  <textarea id="courseDesc" placeholder="תיאור הקורס"></textarea>
  <button class="btn" onclick="addCourse()">הוסף קורס</button>

  <hr>

  <h3>הוסף שיעור לסרטון</h3>
  <input type="text" id="lessonCourseId" placeholder="ID קורס">
  <input type="text" id="lessonTitle" placeholder="שם שיעור">
  <input type="text" id="lessonVideoUrl" placeholder="קישור לסרטון">
  <button class="btn" onclick="addLesson()">הוסף שיעור</button>

  <hr>

  <h3>הוסף מבחן</h3>
  <input type="text" id="quizCourseId" placeholder="ID קורס">
  <input type="text" id="quizQuestion" placeholder="שאלה">
  <input type="text" id="quizAnswer" placeholder="תשובה">
  <button class="btn" onclick="addQuiz()">הוסף מבחן</button>

  <hr>

  <h3>רשימת הקורסים</h3>
  <table id="coursesTable">
    <thead>
      <tr>
        <th>ID קורס</th>
        <th>שם הקורס</th>
        <th>תיאור</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const API_URL = "הכנס כאן את כתובת ה-Web App שלך";

function fetchCoursesList(){
  fetch(`${API_URL}?action=getCourses`)
    .then(res=>res.json())
    .then(data=>{
      const tbody = document.querySelector("#coursesTable tbody");
      tbody.innerHTML = "";
      data.forEach(course=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${course.courseId}</td>
          <td>${course.title}</td>
          <td>${course.description}</td>
        `;
        tbody.appendChild(tr);
      });
    });
}

function addCourse(){
  const title = document.getElementById("courseTitle").value.trim();
  const desc = document.getElementById("courseDesc").value.trim();
  if(!title){ alert("מלא שם קורס"); return; }

  fetch(`${API_URL}?action=addCourse&title=${encodeURIComponent(title)}&description=${encodeURIComponent(desc)}`)
    .then(res=>res.json())
    .then(data=>{
      if(data.success){
        alert("קורס נוסף בהצלחה! ID: "+data.courseId);
        fetchCoursesList();
        document.getElementById("courseTitle").value="";
        document.getElementById("courseDesc").value="";
      } else alert("שגיאה: "+data.message);
    });
}

function addLesson(){
  const courseId = document.getElementById("lessonCourseId").value.trim();
  const title = document.getElementById("lessonTitle").value.trim();
  const videoUrl = document.getElementById("lessonVideoUrl").value.trim();
  if(!courseId || !title || !videoUrl){ alert("מלא את כל השדות"); return; }

  fetch(`${API_URL}?action=addLesson&courseId=${courseId}&title=${encodeURIComponent(title)}&videoUrl=${encodeURIComponent(videoUrl)}`)
    .then(res=>res.json())
    .then(data=>{
      if(data.success){ alert("שיעור נוסף בהצלחה!"); }
      else alert("שגיאה: "+data.message);
    });
}

function addQuiz(){
  const courseId = document.getElementById("quizCourseId").value.trim();
  const question = document.getElementById("quizQuestion").value.trim();
  const answer = document.getElementById("quizAnswer").value.trim();
  if(!courseId || !question || !answer){ alert("מלא את כל השדות"); return; }

  fetch(`${API_URL}?action=addQuiz&courseId=${courseId}&question=${encodeURIComponent(question)}&answer=${encodeURIComponent(answer)}`)
    .then(res=>res.json())
    .then(data=>{
      if(data.success){ alert("מבחן נוסף בהצלחה!"); }
      else alert("שגיאה: "+data.message);
    });
}

// טעינת רשימת קורסים קיימים
fetchCoursesList();
</script>

</body>
</html>
